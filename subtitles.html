<head>
  <title>Subtitler</title>
</head>

<body>
  <div class='navbar navbar-fixed-top'>
    <div class='navbar-inner'>
      <div class='container-fluid'>
      <img class='logo' src='/images/logo_dark.png'/>
      <ul class='nav pull-right'>
        {{> navigation}}
      </ul>
    </div>
  </div>
  </div>
    {{> map}}
  <div id='main' class='container'>
      {{> body}}
  </div>
</body>

<template name='navigation'>
   <li><a href='#' id='create-new-project'>New Project</a></li>
        <li class='active'><a href='#'>Library</a></li>
        <li class='divider-vertical'> </li>
        <li class='dropdown'>
          <a href='#' class='dropdown-toggle' data-toggle='dropdown'>Ben McMahen <b class='caret'></b></a>
          <ul class='dropdown-menu' role='dropdown' aria-labelledby='dropdownMenu' >
            <li><a href='#' tabindex='-1'>Settings... </a></li>
            <li class='divider'></li>
            <li><a href='#' tabindex='-1'>Logout... </a></li>
          </ul>
        </li>
</template>

<template name='body'>
    {{#if currentVideo}}
      <div class='row'>
        <div class='span5'>
          {{> video}}
          {{> stats}}
        </div>
        <div class='span7'>
          {{> captions}}
        </div>
      </div>
      {{else}}
        <div class='span12'>
          <input type='text' id='project-name' class='newproject'/>
          <input type='submit' class='btn'/>
        </div>
    {{/if}}
</template>

<template name='map'>
  {{#constant}}
    <svg id='video-map' width='100%' height='120'>    
      <g class='map-wrap' transform = 'translate(40,20)'>
            <rect class='map-background'></rect>
            <g class='caption-spans'></g>
            <g class='time-labels'></g>
            <g class='tick-bars'></g>
        </g>

    </svg>
  {{/constant}}
</template>

<template name="video">
  <div class='row'>
    <div class='span5'>
  <input accept="video/*" type='file'  class='btn' name='video-input' id='video-input'/>
    </div>
  </div>
  <div class='row'>
    <div class='span5'>
  <video id='video-display'></video>
    </div>
  </div>
  <div class='row'>
    <div class='span5'>
      {{> controls}}
    </div>
  </div>
</template>

<template name='stats'>
  <ul>
    <li> Current Time: {{currentTime}} </li>
    <li> Start Time, End Time: {{startTime}} - {{endTime}} </li>
    <li> Looping? {{looping}} </li>
    <li> Video Playing? {{videoPlaying}} </li>
    <li> Saving? {{saving}} </li>
  </ul>
</template>

<template name='controls'>
  <div class='progressBar'>
  <div id='timeBar'></div>
</div>
Loop? <input type='checkbox' id='loop-checked' 
    {{#if looping}}
      checked
    {{/if}}
    />
<input type='text' id='loop-duration-input' placeholder='loop duration' value='{{loopDuration}}'/>
</template>

<template name='captions'>
  <div class='row'>
    <div class='span7'>
      <hr>
        <input type='text' placeholder='Search Captions'/>
        <input type='button' class='btn' value='Insert Caption' id='insert-new-caption'/>
        <input type='button' class='btn' value='Export' id='export-subtitles'/>
      <hr>
    </div>
  </div>
<div class='row'>
  <div class='span7'>
    <ul id='captions'>
    {{#each caption}}
    {{> caption}}
    {{/each}}
    </ul>
  </div>
</div>
</template>

<template name='caption'>
  <li class='caption' name='{{_id}}'>
    <div class='times'>
      {{#with formatTime this}}
        {{start}} - {{end}} 
      {{/with}}
    </div>
  <div class="expandingArea active">
      <pre><span></span><br></pre>
    <textarea id='{{_id}}'>{{text}}</textarea>
  </div>
  <a href='#' class='delete-sub'>
  <i class='icon-trash'></i>
</a>

  </li>
</template>