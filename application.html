

<template name='application'>
  {{#if currentUser}}
    {{#if currentVideo}}
      {{> map}}
      <div class='container-fluid'>
      <div class='row-fluid'>
        <div class='span5'>
          {{> video}}
        </div>
        <div class='span7'>
          {{> captions}}
        </div>
      </div>
    </div>
    {{/if}}
    {{/if}}
</template>

<template name='map'>
  <div class='timeline-wrapper'>
  {{#constant}}
    <svg id='video-map' width='100%' height='60'>    
      <g class='map-wrap' transform = 'translate(0,60)'>
          <rect class='timeline-click-zone' y='-60' height='60'></rect>
          <g class='caption-spans'></g>
          <line id='current-position' y1='0' y2='-60'></line>
      </g>
    </svg>
  {{/constant}}
</div>
</template>

<!-- VIDEO --> 

<template name="video">
  <div class='wrapper'>
  <div class='row-fluid'>
    <div class='span12'>
        <div class='video-dropzone'>
          <video id='video-display' src='{{fileURL}}'></video>
        </div>
      </div>
      </div>

          {{> controls}}

    </div>

</template>

<template name='stats'>
  <ul>
    <li> Current Time: {{currentTime}} </li>
    <li> Start Time, End Time: {{startTime}} - {{endTime}} </li>
    <li> Looping? {{looping}} </li>
    <li> Video Playing? {{videoPlaying}} </li>
    <li> Saving? {{saving}} </li>
  </ul>
</template>

<template name='controls'>
  <div class='row-fluid'>
    <div class='span12 controls'>

  <fieldset>
    <input type='checkbox' id='loop-checked' checked='{{looping}}'>
    <span>Loop</span> 
    <select id='loop-duration' {{#unless looping}} disabled {{/unless}}>
      <option value='1'> 1s </option>
      <option value='2'> 2s </option>
      <option value='3'> 3s </option>
      <option value='4'> 4s </option>
      <option value='5' selected> 5s </option>
      <option value='6'> 6s </option>
      <option value='7'> 7s </option>
      <option value='8'> 8s </option>
      <option value='9'> 9s </option>
      <option value='10'> 10s </option>
    </select>
</fieldset>

  <a class='btn video-controls' id='skip-to-beginning'></a>
  <a class='btn video-controls {{playing}}' id='play-video'></a>
  <a class='btn video-controls' id='skip-to-end'></a>

  <fieldset>
    <span>Rate </span>
    <select id='playback-rate'>
      <option value='8'> 8x </option>
      <option value='1.5'> 1.5x </option>
      <option value='1' selected> 1x </option>
      <option value='0.8'> 0.8x </option>
      <option value='0.5'> 0.5x </option>
      <option value='0.3'> 0.3x </option>
    </select>
  </fieldset>
</template>

<!-- CAPTIONS -->

<template name='captions'>
  <div class='row-fluid'>
    <div class='span12 toolbar'>
        <input type='text' placeholder='Search Captions'/>
        <input type='button' class='btn green pull-left' value='Insert Caption' id='insert-new-caption'/>
        <input type='button' class='btn blue' value='Export' id='export-subtitles'/>
    </div>
  </div>
<div class='row-fluid'>
  <!-- Because sometimes tables make sense... -->

  <div id='captions'>
    <table class='captions'>
      <tbody>
        {{#each caption}}
        {{> caption}}
        {{/each}}
      </tbody>
    </table>
  </div>
</div>
</div>
</div>
</template>

<template name='caption'>
  <tr class='caption'>
    <td class='times left-fixed-width'>
      <p>
      {{#with formatTime this}}
        {{start}} - {{end}}
      {{/with}}
    </p>
    </td>
  <td class="expandingArea active">
      <pre><span></span><br></pre>
    <textarea id='{{_id}}'>{{text}}</textarea>
  </td>
  <td class='delete-sub right-fixed-width'>
    <i class='icon-trash'></i>
  </td>
  </tr>
</template>